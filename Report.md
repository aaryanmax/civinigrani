# CiviNigrani Project Report

## 1. Executive Summary

**CiviNigrani** ("Citizen Watch") is an AI-powered governance intelligence platform designed to bridge the gap between public policy promises and on-the-ground reality. Focusing on the **Public Distribution System (PDS)** in Uttar Pradesh, it leverages advanced data analytics, machine learning, and secure AI agents to detect delivery gaps, forecast risks, and highlight grievance signals.

The platform provides a unified view for administrators and civil society to monitor food security implementation, moving beyond static reports to dynamic, predictive intelligence.

---

## 2. System Architecture

CiviNigrani follows a modern, modular architecture integrating data processing, machine learning, and interactive UI.

### 2.1 Core Components

*   **Frontend**: Built with **Streamlit**, offering a responsive, multi-page dashboard.
*   **Backend Logic**: Python-based data processing using **Pandas** and **NumPy**.
*   **AI Intelligence**:
    *   **LLM**: **Gemini 2.0 Flash** (via `google-genai` SDK) for natural language understanding and plan generation.
    *   **Security Layer**: **ArmorIQ SDK** for verified tool execution, RBAC, and content safety.
*   **Data Layer**: Custom **MCP (Model Context Protocol) Server** that exposes secure data tools to the AI agent.

### 2.2 Data Flow

1.  **Ingestion**: Scrapers fetch raw PDS allocation/distribution data and CPGRAMS grievance reports.
2.  **Processing**:
    *   **PRGI Engine**: Calculates the *Policy Reality Gap Index* (Allocation vs. Distribution).
    *   **PGSM Engine**: Mines *Public Grievance Signal Metrics* to detect anomalies.
3.  **Analysis**:
    *   **Prophet** models generate time-series forecasts.
    *   **Gemini** agent interprets user queries.
4.  **Presentation**: Interactive maps, charts, and conversational insights.

---

## 3. Data Sources

The platform relies entirely on open public government data:

| Metric | Source | Description |
| :--- | :--- | :--- |
| **PDS Allocation** | India Data Portal (NFSA) | Monthly grain allocation per district. |
| **PDS Distribution** | India Data Portal (NFSA) | Actual grain distributed to beneficiaries. |
| **Grievances** | CPGRAMS (Govt of India) | Citizen complaints filed against the department. |
| **Boundaries** | Open Government Data (OGD) | GeoJSON shapefiles for UP districts. |

*Note: News integration (via NewsAPI) provides qualitative context to quantitative data.*

---

## 4. AI & Machine Learning Components

### 4.1 Policy Reality Gap Index (PRGI)
A custom metric quantifying the efficiency of welfare delivery:
$$ PRGI = \frac{\text{Allocated} - \text{Distributed}}{\text{Allocated}} $$
*   **0.0**: Perfect delivery.
*   **> 0.3**: Critical failure (30% leakage or non-delivery).

### 4.2 Time-Series Forecasting (Prophet)
*   **Objective**: Predict future PRGI trends to preemptively identify at-risk districts.
*   **Method**: Facebook Prophet additive regression models.
*   **Features**: Seasonality detection, trend changepoints.
*   **Output**: 3-month lookahead with confidence intervals.

### 4.3 Verified AI Agent (ArmorIQ + Gemini)
A secure conversational assistant for data exploration.

*   **Model**: Gemini 2.0 Flash.
*   **Role-Based Access Control (RBAC)**:
    *   **Analyst**: Read-only access to all data insights.
    *   **Admin**: distinct capability to update/correct data records (Write access).
*   **Verification Workflow**:
    1.  **Plan**: Agent proposes an action (e.g., "Update Lucknow data").
    2.  **Token**: ArmorIQ checks policy. If allowed, issues a unique intent token.
    3.  **Invoke**: MCP server executes the tool *only* if the token is valid.

---

## 5. Technology Stack

*   **Languages**: Python 3.9+
*   **Frameworks**: Streamlit, Facebook Prophet, Google GenAI
*   **Libraries**:
    *   `pandas`, `numpy`: Data manipulation.
    *   `plotly`, `folium`: Interactive visualizations.
    *   `armoriq-sdk`: Agent security and verification.
    *   `python-dotenv`: Configuration management.

---

## 6. Future Roadmap

1.  **Granularity**: Drill down to Block/Tehsil level data.
2.  **Multi-State Support**: Expand beyond Uttar Pradesh.
3.  **Predictive Supply Chain**: Integrate logistics data to predict stockouts.
4.  **Citizen App**: simpler interface for beneficiaries to report issues directly.

---

*Generated by CiviNigrani AI Team*
